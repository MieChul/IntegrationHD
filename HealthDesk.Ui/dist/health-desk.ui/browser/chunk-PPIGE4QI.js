import{H as I,Hb as L,K as U,nb as S}from"./chunk-5VV6OAQB.js";import{a as p,b as y,i as c,j as f,k as D}from"./chunk-H5ORMA4Q.js";var m=(e,r)=>r.some(t=>e instanceof t),x,M;function V(){return x||(x=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function O(){return M||(M=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var w=new WeakMap,$=new WeakMap,l=new WeakMap;function W(e){let r=new Promise((t,s)=>{let n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(u(e.result)),n()},a=()=>{s(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",a)});return l.set(r,e),r}function N(e){if(w.has(e))return;let r=new Promise((t,s)=>{let n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),n()},a=()=>{s(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});w.set(e,r)}var v={get(e,r,t){if(e instanceof IDBTransaction){if(r==="done")return w.get(e);if(r==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return u(e[r])},set(e,r,t){return e[r]=t,!0},has(e,r){return e instanceof IDBTransaction&&(r==="done"||r==="store")?!0:r in e}};function A(e){v=e(v)}function k(e){return O().includes(e)?function(...r){return e.apply(B(this),r),u(this.request)}:function(...r){return u(e.apply(B(this),r))}}function F(e){return typeof e=="function"?k(e):(e instanceof IDBTransaction&&N(e),m(e,V())?new Proxy(e,v):e)}function u(e){if(e instanceof IDBRequest)return W(e);if($.has(e))return $.get(e);let r=F(e);return r!==e&&($.set(e,r),l.set(r,e)),r}var B=e=>l.get(e);function j(e,r,{blocked:t,upgrade:s,blocking:n,terminated:i}={}){let a=indexedDB.open(e,r),d=u(a);return s&&a.addEventListener("upgradeneeded",o=>{s(u(a.result),o.oldVersion,o.newVersion,u(a.transaction),o)}),t&&a.addEventListener("blocked",o=>t(o.oldVersion,o.newVersion,o)),d.then(o=>{i&&o.addEventListener("close",()=>i()),n&&o.addEventListener("versionchange",h=>n(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}var K=["get","getKey","getAll","getAllKeys","count"],R=["put","add","delete","clear"],b=new Map;function P(e,r){if(!(e instanceof IDBDatabase&&!(r in e)&&typeof r=="string"))return;if(b.get(r))return b.get(r);let t=r.replace(/FromIndex$/,""),s=r!==t,n=R.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(n||K.includes(t)))return;let i=function(a,...d){return c(this,null,function*(){let o=this.transaction(a,n?"readwrite":"readonly"),h=o.store;return s&&(h=h.index(d.shift())),(yield Promise.all([h[t](...d),n&&o.done]))[0]})};return b.set(r,i),i}A(e=>y(p({},e),{get:(r,t,s)=>P(r,t)||e.get(r,t,s),has:(r,t)=>!!P(r,t)||e.has(r,t)}));var H=["continue","continuePrimaryKey","advance"],E={},g=new WeakMap,T=new WeakMap,z={get(e,r){if(!H.includes(r))return e[r];let t=E[r];return t||(t=E[r]=function(...s){g.set(this,T.get(this)[r](...s))}),t}};function G(...e){return D(this,null,function*(){let r=this;if(r instanceof IDBCursor||(r=yield new f(r.openCursor(...e))),!r)return;r=r;let t=new Proxy(r,z);for(T.set(t,r),l.set(t,B(r));r;)yield t,r=yield new f(g.get(t)||r.continue()),g.delete(t)})}function C(e,r){return r===Symbol.asyncIterator&&m(e,[IDBIndex,IDBObjectStore,IDBCursor])||r==="iterate"&&m(e,[IDBIndex,IDBObjectStore])}A(e=>y(p({},e),{get(r,t,s){return C(r,t)?G:e.get(r,t,s)},has(r,t){return C(r,t)||e.has(r,t)}}));var _=(()=>{class e{constructor(t){this.http=t,this.apiUrl=`${L.apiUrl}`,this.initDB()}getAllLabTests(t){return this.http.get(`${this.apiUrl}/laboratory/${t}/lab-tests`)}getLabTestById(t,s){return this.http.get(`${this.apiUrl}/laboratory/${t}/lab-tests/${s}`)}saveLabTest(t,s){return this.http.post(`${this.apiUrl}/laboratory/${t}/lab-tests`,s)}deleteLabTest(t,s){return this.http.delete(`${this.apiUrl}/laboratory/${t}/lab-tests/${s}`)}getAllMedicines(t){return this.http.get(`${this.apiUrl}/pharmacy/${t}/medicines`)}getMedicineById(t,s){return this.http.get(`${this.apiUrl}/pharmacy/${t}/medicines/${s}`)}saveMedicine(t,s){return this.http.post(`${this.apiUrl}/pharmacy/${t}/medicines`,s)}deleteMedicine(t,s){return this.http.delete(`${this.apiUrl}/pharmacy/${t}/medicines/${s}`)}getAllPhysicians(t){return this.http.get(`${this.apiUrl}/hospital/${t}/physicians`)}getPhysicianByMobile(t){return this.http.get(`${this.apiUrl}/hospital/${t}/get-by-mobile`)}deletePhysician(t,s){return this.http.delete(`${this.apiUrl}/hospital/${t}/physicians/${s}`)}getAllServices(t){return this.http.get(`${this.apiUrl}/hospital/${t}/services`)}saveService(t,s){return this.http.post(`${this.apiUrl}/hospital/${t}/services`,s)}savePhysician(t,s){return this.http.post(`${this.apiUrl}/hospital/${t}/physicians`,s)}deleteService(t,s){return this.http.delete(`${this.apiUrl}/${t}/hopital/services/${s}`)}getAllBrandLibraries(t){return this.http.get(`${this.apiUrl}/${t}/brand-library`)}saveBrandLibrary(t,s){return this.http.post(`${this.apiUrl}/${t}/brand-library`,s)}deleteBrandLibrary(t,s){return this.http.delete(`${this.apiUrl}/${t}/brand-library/${s}`)}getSurveysmain(t){return this.http.get(`${this.apiUrl}/${t}/surveys`)}saveSurveymain(t,s){return this.http.post(`${this.apiUrl}/${t}/surveys`,s)}deleteSurveymain(t,s){return this.http.delete(`${this.apiUrl}/${t}/surveys/${s}`)}getSharedWith(t,s){return this.http.get(`${this.apiUrl}/${t}/surveys/${s}/shared-with`)}addSharedWith(t,s,n){return this.http.post(`${this.apiUrl}/${t}/surveys/${s}/shared-with`,n)}initDB(){return c(this,null,function*(){this.db=yield j("surveyDB",1,{upgrade(t){t.objectStoreNames.contains("surveys")||t.createObjectStore("surveys",{keyPath:"id",autoIncrement:!0})}})})}saveSurvey(t){return c(this,null,function*(){yield this.initDB();let s=yield this.db.transaction("surveys","readwrite");yield s.store.add(t),yield s.done})}getSurveyById(t){return c(this,null,function*(){return yield this.initDB(),yield(yield this.db.transaction("surveys","readonly")).store.get(Number(t))})}saveResponse(t,s){return c(this,null,function*(){yield this.initDB();let n=yield this.db.transaction("surveys","readwrite"),i=yield n.store.get(Number(t));i.responses=i.responses||[],i.responses.push(s),yield n.store.put(i)})}getSurveys(){return c(this,null,function*(){return yield this.initDB(),yield(yield this.db.transaction("surveys","readonly")).store.getAll()})}deleteSurvey(t){return c(this,null,function*(){yield this.initDB();let s=yield this.db.transaction("surveys","readwrite");yield s.store.delete(Number(t)),yield s.done})}updateSurvey(t,s){return c(this,null,function*(){yield this.initDB();let n=yield this.db.transaction("surveys","readwrite");yield n.store.put(s),yield n.done})}static{this.\u0275fac=function(s){return new(s||e)(U(S))}}static{this.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{_ as a};
