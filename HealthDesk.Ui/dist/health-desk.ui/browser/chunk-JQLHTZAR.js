import{a as ee}from"./chunk-7YHD3GNJ.js";import{a as L,b as te}from"./chunk-IHHBL45Q.js";import{$ as Be,B as F,E as R,G as ve,H as O,N as W,O as ge,P as V,R as nt,S as rt,T as at,U as st,V as C,W as E,X as _e,Y as Ne,Z as lt,_ as ct,aa as mt,ba as dt,c as it,ca as be,d as Re,da as j,ea as N,f as fe,fa as X,g as Oe,ga as B,h as Ve,ha as D,ia as ye,ka as pt,s as T,u as g,v as A,w as M,z as he}from"./chunk-FS75365R.js";import{$ as G,$a as Xe,$b as K,Ca as Je,Ea as v,H as Ge,I as Ue,Ia as H,Ib as et,J as He,Ja as d,N as k,Na as Ke,O as ne,Ob as tt,P as Pe,Q as _,R as $e,Sa as n,Sb as ue,Ta as r,Tb as P,U as b,Ua as p,V as re,W as pe,Xa as $,Za as We,_a as u,aa as U,ab as w,c as Q,fa as ae,gb as Te,gc as Y,hb as Ae,hc as ot,ia as Ye,ib as Me,ic as S,jc as je,ka as Qe,mb as s,nb as z,ob as y,p as me,sa as l,ta as m,va as Ze,vb as Fe,x as de}from"./chunk-YUQOPSVW.js";import{a as J}from"./chunk-H5ORMA4Q.js";var ft=(()=>{class i{constructor(e){this.http=e,this.apiUrl=ee.apiUrl+"/auth"}login(e,o){return this.http.post(`${this.apiUrl}/login`,{username:e,password:o}).pipe(He(t=>{sessionStorage.setItem("role",t.role),sessionStorage.setItem("username",t.username)}))}logout(){this.http.post(`${this.apiUrl}/logout`,{},{withCredentials:!0}).subscribe({next:()=>{console.log("Logged out successfully"),sessionStorage.removeItem("role"),sessionStorage.removeItem("username")},error:e=>console.error("Logout failed",e)})}static{this.\u0275fac=function(o){return new(o||i)(_(K))}}static{this.\u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function At(i,f){if(i&1){let e=$();n(0,"div",1)(1,"button",2),u("click",function(){G(e);let t=w();return U(t.action())}),s(2),r()()}if(i&2){let e=w();l(2),y(" ",e.data.action," ")}}var Mt=["label"];function Ft(i,f){}var Rt=Math.pow(2,31)-1,se=class{constructor(f,e){this._overlayRef=e,this._afterDismissed=new Q,this._afterOpened=new Q,this._onAction=new Q,this._dismissedByAction=!1,this.containerInstance=f,f._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(f){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(f,Rt))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},ht=new Pe("MatSnackBarData"),ie=class{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}},Ot=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275dir=pe({type:i,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"],standalone:!0})}}return i})(),Vt=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275dir=pe({type:i,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"],standalone:!0})}}return i})(),jt=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275dir=pe({type:i,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"],standalone:!0})}}return i})(),Nt=(()=>{class i{constructor(e,o){this.snackBarRef=e,this.data=o}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static{this.\u0275fac=function(o){return new(o||i)(m(se),m(ht))}}static{this.\u0275cmp=b({type:i,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],standalone:!0,features:[Fe],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(o,t){o&1&&(n(0,"div",0),s(1),r(),v(2,At,3,1,"div",1)),o&2&&(l(),y(" ",t.data.message,`
`),l(),Ke(t.hasAction?2:-1))},dependencies:[E,Ot,Vt,jt],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0})}}return i})(),Bt={snackBarState:it("state",[Oe("void, hidden",fe({transform:"scale(0.8)",opacity:0})),Oe("visible",fe({transform:"scale(1)",opacity:1})),Ve("* => visible",Re("150ms cubic-bezier(0, 0, 0.2, 1)")),Ve("* => void, * => hidden",Re("75ms cubic-bezier(0.4, 0.0, 1, 1)",fe({opacity:0})))])},Dt=0,Lt=(()=>{class i extends ct{constructor(e,o,t,a,c){super(),this._ngZone=e,this._elementRef=o,this._changeDetectorRef=t,this._platform=a,this.snackBarConfig=c,this._document=$e(tt),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Q,this._onExit=new Q,this._onEnter=new Q,this._animationState="void",this._liveElementId=`mat-snack-bar-container-live-${Dt++}`,this.attachDomPortal=h=>{this._assertNotAttached();let I=this._portalOutlet.attachDomPortal(h);return this._afterPortalAttached(),I},c.politeness==="assertive"&&!c.announcementMessage?this._live="assertive":c.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();let o=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),o}attachTemplatePortal(e){this._assertNotAttached();let o=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),o}onAnimationEnd(e){let{fromState:o,toState:t}=e;if((t==="void"&&o!=="void"||t==="hidden")&&this._completeExit(),t==="visible"){let a=this._onEnter;this._ngZone.run(()=>{a.next(),a.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let e=this._elementRef.nativeElement,o=this.snackBarConfig.panelClass;o&&(Array.isArray(o)?o.forEach(c=>e.classList.add(c)):e.classList.add(o)),this._exposeToModals();let t=this._label.nativeElement,a="mdc-snackbar__label";t.classList.toggle(a,!t.querySelector(`.${a}`))}_exposeToModals(){let e=this._liveElementId,o=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let t=0;t<o.length;t++){let a=o[t],c=a.getAttribute("aria-owns");this._trackedModals.add(a),c?c.indexOf(e)===-1&&a.setAttribute("aria-owns",c+" "+e):a.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{let o=e.getAttribute("aria-owns");if(o){let t=o.replace(this._liveElementId,"").trim();t.length>0?e.setAttribute("aria-owns",t):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{let e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),o=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&o){let t=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(t=document.activeElement),e.removeAttribute("aria-hidden"),o.appendChild(e),t?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static{this.\u0275fac=function(o){return new(o||i)(m(Ye),m(Qe),m(et),m(nt),m(ie))}}static{this.\u0275cmp=b({type:i,selectors:[["mat-snack-bar-container"]],viewQuery:function(o,t){if(o&1&&(Te(Be,7),Te(Mt,7)),o&2){let a;Ae(a=Me())&&(t._portalOutlet=a.first),Ae(a=Me())&&(t._label=a.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:1,hostBindings:function(o,t){o&1&&Xe("@state.done",function(c){return t.onAnimationEnd(c)}),o&2&&We("@state",t._animationState)},standalone:!0,features:[Je,Fe],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(o,t){o&1&&(n(0,"div",1)(1,"div",2,0)(3,"div",3),v(4,Ft,0,0,"ng-template",4),r(),p(5,"div"),r()()),o&2&&(l(5),H("aria-live",t._live)("role",t._role)("id",t._liveElementId))},dependencies:[Be],styles:[".mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}.cdk-high-contrast-active .mat-mdc-snackbar-surface{outline:solid 1px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mdc-snackbar-supporting-text-color, var(--mat-app-inverse-on-surface));border-radius:var(--mdc-snackbar-container-shape, var(--mat-app-corner-extra-small));background-color:var(--mdc-snackbar-container-color, var(--mat-app-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mdc-snackbar-supporting-text-font, var(--mat-app-body-medium-font));font-size:var(--mdc-snackbar-supporting-text-size, var(--mat-app-body-medium-size));font-weight:var(--mdc-snackbar-supporting-text-weight, var(--mat-app-body-medium-weight));line-height:var(--mdc-snackbar-supporting-text-line-height, var(--mat-app-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color, var(--mat-app-inverse-primary));--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}"],encapsulation:2,data:{animation:[Bt.snackBarState]}})}}return i})();function qt(){return new ie}var zt=new Pe("mat-snack-bar-default-options",{providedIn:"root",factory:qt}),vt=(()=>{class i{get _openedSnackBarRef(){let e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(e,o,t,a,c,h){this._overlay=e,this._live=o,this._injector=t,this._breakpointObserver=a,this._parentSnackBar=c,this._defaultConfig=h,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=Nt,this.snackBarContainerComponent=Lt,this.handsetCssClass="mat-mdc-snack-bar-handset"}openFromComponent(e,o){return this._attach(e,o)}openFromTemplate(e,o){return this._attach(e,o)}open(e,o="",t){let a=J(J({},this._defaultConfig),t);return a.data={message:e,action:o},a.announcementMessage===e&&(a.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,a)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,o){let t=o&&o.viewContainerRef&&o.viewContainerRef.injector,a=ae.create({parent:t||this._injector,providers:[{provide:ie,useValue:o}]}),c=new Ne(this.snackBarContainerComponent,o.viewContainerRef,a),h=e.attach(c);return h.instance.snackBarConfig=o,h.instance}_attach(e,o){let t=J(J(J({},new ie),this._defaultConfig),o),a=this._createOverlay(t),c=this._attachSnackBarContainer(a,t),h=new se(c,a);if(e instanceof Ze){let I=new lt(e,null,{$implicit:t.data,snackBarRef:h});h.instance=c.attachTemplatePortal(I)}else{let I=this._createInjector(t,h),It=new Ne(e,void 0,I),Pt=c.attachComponentPortal(It);h.instance=Pt.instance}return this._breakpointObserver.observe(at.HandsetPortrait).pipe(Ue(a.detachments())).subscribe(I=>{a.overlayElement.classList.toggle(this.handsetCssClass,I.matches)}),t.announcementMessage&&c._onAnnounce.subscribe(()=>{this._live.announce(t.announcementMessage,t.politeness)}),this._animateSnackBar(h,t),this._openedSnackBarRef=h,this._openedSnackBarRef}_animateSnackBar(e,o){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),o.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),o.duration&&o.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(o.duration))}_createOverlay(e){let o=new mt;o.direction=e.direction;let t=this._overlay.position().global(),a=e.direction==="rtl",c=e.horizontalPosition==="left"||e.horizontalPosition==="start"&&!a||e.horizontalPosition==="end"&&a,h=!c&&e.horizontalPosition!=="center";return c?t.left("0"):h?t.right("0"):t.centerHorizontally(),e.verticalPosition==="top"?t.top("0"):t.bottom("0"),o.positionStrategy=t,this._overlay.create(o)}_createInjector(e,o){let t=e&&e.viewContainerRef&&e.viewContainerRef.injector;return ae.create({parent:t||this._injector,providers:[{provide:se,useValue:o},{provide:ht,useValue:e.data}]})}static{this.\u0275fac=function(o){return new(o||i)(_(dt),_(st),_(ae),_(rt),_(i,12),_(zt))}}static{this.\u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var q=(()=>{class i{constructor(e){this.snackBar=e}showSuccess(e){this.snackBar.open(e,"Close",{duration:3e3,panelClass:["success-snackbar"],verticalPosition:"top"})}showError(e){this.snackBar.open(e,"Close",{duration:3e3,panelClass:["error-snackbar"],verticalPosition:"top"})}static{this.\u0275fac=function(o){return new(o||i)(_(vt))}}static{this.\u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Ut(i,f){i&1&&(n(0,"mat-error"),s(1,"Username is required"),r())}function Ht(i,f){i&1&&(n(0,"mat-error"),s(1,"Password is required"),r())}var De=(()=>{class i{constructor(e,o,t,a,c){this.fb=e,this.loaderService=o,this.router=t,this.authService=a,this.notificationService=c,this.hide=!0,this.errorMessage=""}ngOnInit(){this.loginForm=this.fb.group({username:["",g.required],password:["",g.required]})}getControl(e){return this.loginForm.get(e)}onSubmit(){if(this.loginForm.valid){this.loaderService.show();let{username:e,password:o}=this.loginForm.value;this.router.navigate(["/physician"]),this.loaderService.hide()}}navigateToSignup(){this.router.navigate(["/role-selection"])}navigateVerifyPassword(){this.router.navigate(["/verify-forgot-password"])}static{this.\u0275fac=function(o){return new(o||i)(m(V),m(L),m(S),m(ft),m(q))}}static{this.\u0275cmp=b({type:i,selectors:[["app-login"]],decls:37,vars:6,consts:[[1,"capsule-container"],[1,"logo-container"],[1,"logo-animated"],[3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline",1,"full-width"],["matInput","","formControlName","username","required","","type","text","placeholder","Enter username"],[4,"ngIf"],["matInput","","formControlName","password","required","","placeholder","Enter password",3,"type"],["mat-icon-button","","matSuffix","",1,"m-1","cursor-pointer",3,"click"],["mat-raised-button","","type","submit",1,"custom-primary","full-width","login-button"],[1,"divider"],[1,"auth-options"],[1,"signup-text"],[1,"cursor-pointer",3,"click"]],template:function(o,t){if(o&1&&(n(0,"div",0)(1,"div",1),p(2,"div",2),n(3,"h2"),s(4,"HealthDesk"),r()(),n(5,"form",3),u("ngSubmit",function(){return t.onSubmit()}),n(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),s(9,"Username"),r(),p(10,"input",6),v(11,Ut,2,0,"mat-error",7),r()(),n(12,"div",4)(13,"mat-form-field",5)(14,"mat-label"),s(15,"Password"),r(),p(16,"input",8),n(17,"div",9),u("click",function(){return t.hide=!t.hide}),n(18,"mat-icon"),s(19),r()(),v(20,Ht,2,0,"mat-error",7),r()(),n(21,"button",10),s(22,"Login"),r(),n(23,"div",11),s(24,"or"),r(),n(25,"div",12)(26,"p",13),s(27," Don't have an account? "),n(28,"a",14),u("click",function(){return t.navigateToSignup()}),n(29,"mat-icon"),s(30,"person_add"),r(),s(31," Sign up "),r()(),n(32,"p",13)(33,"a",14),u("click",function(){return t.navigateVerifyPassword()}),n(34,"mat-icon"),s(35,"lock_open"),r(),s(36," Forgot Password? "),r()()()()()),o&2){let a,c;l(5),d("formGroup",t.loginForm),l(6),d("ngIf",((a=t.getControl("username"))==null?null:a.invalid)&&((a=t.getControl("username"))==null?null:a.touched)),l(5),d("type",t.hide?"password":"text"),l(),H("aria-label","Show password"),l(2),z(t.hide?"visibility_off":"visibility"),l(),d("ngIf",((c=t.getControl("password"))==null?null:c.invalid)&&((c=t.getControl("password"))==null?null:c.touched))}},dependencies:[P,F,T,A,M,W,R,O,C,E,B,j,N,X,D]})}}return i})();var gt=(()=>{class i{constructor(e){this.router=e}selectRole(e){this.router.navigate(["/verify-otp"],{queryParams:{role:e}})}navigateToLogin(){this.router.navigate(["/login"])}navigateVerifyPassword(){this.router.navigate(["/verify-forgot-password"])}static{this.\u0275fac=function(o){return new(o||i)(m(S))}}static{this.\u0275cmp=b({type:i,selectors:[["app-role-select"]],decls:48,vars:0,consts:[[1,"capsule-container"],[1,"logo-container"],[1,"logo-animated"],[1,"page-header"],[1,"roles-container"],[1,"row"],[1,"role-tile","col","physician-img","m-1",3,"click"],["src","assets/physician.png","alt","Physician"],[1,"role-title"],[1,"role-tile","col","m-1",3,"click"],["src","assets/patient.png","alt","Patient"],["src","assets/hospital.png","alt","Hospital"],["src","assets/pharma.png","alt","Pharmaceutical"],["src","assets/neutra.png","alt","Nutraceutical"],["src","assets/lab.png","alt","Laboratory"],[1,"divider"],[1,"auth-options"],[1,"signup-text"],[1,"signup-link","cursor-pointer",3,"click"],[1,"cursor-pointer",3,"click"]],template:function(o,t){o&1&&(n(0,"div",0)(1,"div",1),p(2,"div",2),n(3,"h2"),s(4,"HealthDesk"),r()(),n(5,"h3",3),s(6,"Select Your Role"),r(),n(7,"div",4)(8,"div",5)(9,"div",6),u("click",function(){return t.selectRole("Physician")}),p(10,"img",7),n(11,"div",8),s(12,"Physician"),r()(),n(13,"div",9),u("click",function(){return t.selectRole("Patient")}),p(14,"img",10),n(15,"div",8),s(16,"Patient"),r()(),n(17,"div",9),u("click",function(){return t.selectRole("Hospital")}),p(18,"img",11),n(19,"div",8),s(20,"Hospital"),r()()(),n(21,"div",5)(22,"div",9),u("click",function(){return t.selectRole("Pharmaceutical")}),p(23,"img",12),n(24,"div",8),s(25,"Pharmaceutical"),r()(),n(26,"div",9),u("click",function(){return t.selectRole("Nutraceutical")}),p(27,"img",13),n(28,"div",8),s(29,"Nutraceutical"),r()(),n(30,"div",9),u("click",function(){return t.selectRole("Laboratory")}),p(31,"img",14),n(32,"div",8),s(33,"Laboratory"),r()()()(),n(34,"div",15),s(35,"or"),r(),n(36,"div",16)(37,"p",17),s(38," Already have an account? "),n(39,"a",18),u("click",function(){return t.navigateToLogin()}),n(40,"mat-icon"),s(41,"person_add"),r(),s(42," Sign In "),r()(),n(43,"p",17)(44,"a",19),u("click",function(){return t.navigateVerifyPassword()}),n(45,"mat-icon"),s(46,"lock_open"),r(),s(47," Forgot Password? "),r()()()())},dependencies:[C]})}}return i})();var Ie=(()=>{class i{constructor(e){this.http=e,this.apiUrl=ee.apiUrl+"/otp"}sendOtp(e,o){return this.http.post(`${this.apiUrl}/send`,{contact:e,isEmail:o})}verifyOtp(e,o,t){return this.http.post(`${this.apiUrl}/verify`,{contact:e,otp:o,otpToken:t})}static{this.\u0275fac=function(o){return new(o||i)(_(K))}}static{this.\u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Yt(i,f){if(i&1&&(n(0,"mat-error"),s(1),r()),i&2){let e=w();l(),y(" ",e.selectedRole==="Physician"||e.selectedRole==="Patient"?"Please enter a valid mobile number":"Please enter a valid email"," ")}}function Qt(i,f){if(i&1){let e=$();n(0,"div",17)(1,"re-captcha",18),u("resolved",function(t){G(e);let a=w();return U(a.onCaptchaResolved(t))}),r()()}}function Zt(i,f){if(i&1&&(n(0,"div",19)(1,"span",20),s(2),r()()),i&2){let e=w();l(2),y("Resend OTP in ",e.countdown," seconds")}}function Jt(i,f){if(i&1&&p(0,"input",26),i&2){let e=f.index;d("formControlName",e)}}function Kt(i,f){if(i&1){let e=$();n(0,"div",21)(1,"h4",22),s(2,"Enter OTP"),r(),n(3,"div",23),v(4,Jt,1,1,"input",24),r(),n(5,"button",25),u("click",function(){G(e);let t=w();return U(t.verifyOtp())}),s(6,"Verify OTP"),r()()}if(i&2){let e=w();d("formGroup",e.verifyOtpForm),l(4),d("ngForOf",e.otpControls.controls)}}var yt=(()=>{class i{constructor(e,o,t,a,c,h,I){this.fb=e,this.router=o,this.otpService=t,this.authStateService=a,this.notificationService=c,this.route=h,this.loader=I,this.isOtpSent=!1,this.isResendAvailable=!1,this.countdown=60,this.selectedRole="",this.captchaVerified=!1,this.otpToken="",this.isEmail=!1}ngOnInit(){this.route.queryParams.subscribe(e=>{this.selectedRole=e.role||null}),this.verifyOtpForm=this.fb.group({contact:["",this.getContactValidator()],otp:this.fb.array(new Array(6).fill("").map(()=>new he("",g.required)))})}get otpControls(){return this.verifyOtpForm.get("otp")}getContactValidator(){return this.selectedRole==="Physician"||this.selectedRole==="Patient"?[g.required,g.pattern(/^(\+91[-\s]?)?[0]?(91)?[789]\d{9}$/)]:[g.required,g.email]}onCaptchaResolved(e){this.captchaVerified=!!e}getControl(e){return this.verifyOtpForm.get(e)}sendOtp(){this.loader.show(),this.isEmail=!(this.selectedRole==="Physician"||this.selectedRole==="Patient"),this.verifyOtpForm.get("contact")?.value&&this.captchaVerified&&this.otpService.sendOtp(this.verifyOtpForm.get("contact")?.value,this.isEmail).subscribe({next:e=>{this.notificationService.showSuccess("OTP Sent successfully"),this.otpToken=e.otpToken,this.isOtpSent=!0,this.startCountdown(),this.loader.hide()},error:e=>{this.loader.hide(),this.notificationService.showError("Failed to send OTP. Please try again.")}})}startCountdown(){this.isResendAvailable=!1,this.countdown=60,this.countdownSubscription=me(1e3).pipe(de(this.countdown)).subscribe({next:e=>{this.countdown=60-e-1},complete:()=>{this.isResendAvailable=!0}})}resendOtp(){this.isResendAvailable&&this.sendOtp()}verifyOtp(){this.loader.show();let e=this.verifyOtpForm.get("contact")?.value,o=this.otpControls.value.join("");this.otpService.verifyOtp(e,o,this.otpToken).subscribe({next:t=>{this.loader.hide(),t.valid?(this.authStateService.setOtpVerified(!0),this.router.navigate(["/register"],{queryParams:{role:this.selectedRole,contact:this.verifyOtpForm.get("contact")?.value,isEmail:this.isEmail}})):this.notificationService.showError("Invalid OTP")},error:t=>{this.loader.hide(),console.error("OTP verification failed",t),this.notificationService.showError("OTP verification failed. Try again after sometime.")}})}ngOnDestroy(){this.countdownSubscription&&this.countdownSubscription.unsubscribe()}navigateToLogin(){this.router.navigate(["/login"])}navigateVerifyPassword(){this.router.navigate(["/verify-forgot-password"])}static{this.\u0275fac=function(o){return new(o||i)(m(V),m(S),m(Ie),m(te),m(q),m(Y),m(L))}}static{this.\u0275cmp=b({type:i,selectors:[["app-verify-otp"]],decls:32,vars:10,consts:[[1,"capsule-container"],[1,"logo-container"],[1,"logo-animated"],[1,"page-header"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","contact",3,"placeholder"],[4,"ngIf"],["class","captcha-container",4,"ngIf"],["class","resend-otp-message",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",1,"full-width","login-button","m-3",3,"disabled"],["class","otp-section",3,"formGroup",4,"ngIf"],[1,"divider"],[1,"auth-options"],[1,"signup-text"],[1,"signup-link","cursor-pointer",3,"click"],[1,"cursor-pointer",3,"click"],[1,"captcha-container"],["siteKey","6LeLvHIqAAAAAJJVlNmel7PIIAdvQ1Gw3JeaXSMP",3,"resolved"],[1,"resend-otp-message"],[1,"resend-countdown"],[1,"otp-section",3,"formGroup"],[1,"otp-title"],["formArrayName","otp",1,"otp-inputs"],["maxlength","1","class","otp-input",3,"formControlName",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"full-width","login-button","m-2",3,"click"],["maxlength","1",1,"otp-input",3,"formControlName"]],template:function(o,t){if(o&1&&(n(0,"div",0)(1,"div",1),p(2,"div",2),n(3,"h2",3),s(4,"HealthDesk"),r()(),n(5,"h3",3),s(6),r(),n(7,"form",4),u("ngSubmit",function(){return t.sendOtp()}),n(8,"mat-form-field",5)(9,"mat-label"),s(10),r(),p(11,"input",6),v(12,Yt,2,1,"mat-error",7),r(),v(13,Qt,2,0,"div",8)(14,Zt,3,1,"div",9),n(15,"button",10),s(16),r()(),v(17,Kt,7,2,"div",11),n(18,"div",12),s(19,"or"),r(),n(20,"div",13)(21,"p",14),s(22," Already have an account? "),n(23,"a",15),u("click",function(){return t.navigateToLogin()}),n(24,"mat-icon"),s(25,"person_add"),r(),s(26," Sign In "),r()(),n(27,"p",14)(28,"a",16),u("click",function(){return t.navigateVerifyPassword()}),n(29,"mat-icon"),s(30,"lock_open"),r(),s(31," Forgot Password? "),r()()()()),o&2){let a;l(6),y("Verify Your ",t.selectedRole==="Physician"||t.selectedRole==="Patient"?"Mobile Number":"Email",""),l(),d("formGroup",t.verifyOtpForm),l(3),z(t.selectedRole==="Physician"||t.selectedRole==="Patient"?"Mobile Number":"Email"),l(),d("placeholder",t.selectedRole==="Physician"||t.selectedRole==="Patient"?"Enter Mobile Number":"Enter Email"),l(),d("ngIf",((a=t.getControl("contact"))==null?null:a.invalid)&&((a=t.verifyOtpForm.get("contact"))==null?null:a.touched)),l(),d("ngIf",!t.isOtpSent),l(),d("ngIf",t.isOtpSent&&!t.isResendAvailable),l(),d("disabled",!t.captchaVerified||t.isOtpSent&&!t.isResendAvailable),l(),y(" ",t.isOtpSent?"Resend OTP":"Send OTP"," "),l(),d("ngIf",t.isOtpSent)}},dependencies:[ue,P,F,T,A,M,ge,R,O,ve,ye,C,E,B,j,N,D]})}}return i})();var Le=function(i){return i[i.Patient=1]="Patient",i[i.Physician=2]="Physician",i[i.Admin=3]="Admin",i[i.Hospital=4]="Hospital",i[i.Laboratory=5]="Laboratory",i[i.Pharmaceutical=6]="Pharmaceutical",i[i.Nutraceutical=7]="Nutraceutical",i}(Le||{});function St(i){let f=i.charAt(0).toUpperCase()+i.slice(1).toLowerCase();if(Le[f]!==void 0)return Le[f]}var oe=(()=>{class i{constructor(e){this.http=e,this.apiUrl=ee.apiUrl+"/user"}register(e){return this.http.post(`${this.apiUrl}/register`,e)}resetPassword(e,o,t){return this.http.post(`${this.apiUrl}/reset-password`,{contact:e,newPassword:o,isEmail:t})}getUsername(e,o){return this.http.post(`${this.apiUrl}/get-username`,{contact:e,isEmail:o})}static{this.\u0275fac=function(o){return new(o||i)(_(K))}}static{this.\u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Xt(i,f){i&1&&(n(0,"mat-form-field",6)(1,"mat-label"),s(2,"Mobile Number"),r(),p(3,"input",23),r())}function ei(i,f){i&1&&(n(0,"mat-form-field",6)(1,"mat-label"),s(2,"Email"),r(),p(3,"input",24),r())}function ti(i,f){i&1&&(n(0,"mat-error"),s(1),r()),i&2&&(l(),y(" ","Please enter a valid username"," "))}function ii(i,f){i&1&&(n(0,"mat-error"),s(1),r()),i&2&&(l(),y(" ","Please enter a valid password"," "))}function oi(i,f){i&1&&(n(0,"mat-error"),s(1," Passwords do not match "),r())}var wt=(()=>{class i{constructor(e,o,t,a,c,h){this.fb=e,this.router=o,this.userService=t,this.loaderService=a,this.notificationService=c,this.route=h,this.selectedRole="",this.prefilledMobile="",this.prefilledEmail="",this.hide=!0}ngOnInit(){this.route.queryParams.subscribe(e=>{this.selectedRole=e.role||null,e.isEmail==="true"?this.prefilledEmail=e.contact:this.prefilledMobile=e.contact}),this.registerForm=this.fb.group({role:[{value:this.selectedRole,disabled:!0}],mobile:[{value:this.prefilledMobile,disabled:!0}],email:[{value:this.prefilledEmail,disabled:!0}],username:["",[g.required,g.pattern(/^[a-zA-Z0-9]{5,10}$/)]],password:["",[g.required,g.pattern(/^[a-zA-Z0-9_@.$&*-]{6,}$/)]],confirmPassword:["",g.required]})}isPasswordMatch(){return this.registerForm.get("password")?.value===this.registerForm.get("confirmPassword")?.value}getControl(e){return this.registerForm.get(e)}onSubmit(){if(this.registerForm.valid&&this.isPasswordMatch()){this.loaderService.show();var e=St("physician");let o={username:this.registerForm.get("username")?.value,password:this.registerForm.get("password")?.value,email:this.prefilledEmail,mobile:this.prefilledMobile,roleId:e};this.userService.register(o).subscribe({next:()=>{this.loaderService.hide(),this.notificationService.showSuccess("Registration successful. Redirecting to login..."),setTimeout(()=>{this.router.navigate(["/login"])},3e3)},error:t=>{this.loaderService.hide(),t.error?this.notificationService.showError(t.error):this.notificationService.showError("Registration failed. Please try again.")}})}else this.isPasswordMatch()||this.notificationService.showError("Passwords do not match.")}onClear(){this.registerForm.reset({role:{value:this.selectedRole,disabled:!0},mobile:{value:this.prefilledMobile,disabled:!!this.prefilledMobile},email:{value:this.prefilledEmail,disabled:!!this.prefilledEmail}})}navigateToLogin(){this.router.navigate(["/login"])}navigateVerifyPassword(){this.router.navigate(["/verify-forgot-password"])}static{this.\u0275fac=function(o){return new(o||i)(m(V),m(S),m(oe),m(L),m(q),m(Y))}}static{this.\u0275cmp=b({type:i,selectors:[["app-register"]],decls:56,vars:9,consts:[[1,"capsule-container"],[1,"logo-container"],[1,"logo-animated"],[1,"page-header"],[3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline",1,"full-width"],["matInput","","formControlName","role","readonly",""],["appearance","outline","class","full-width",4,"ngIf"],["matInput","","formControlName","username","placeholder","Enter username"],["mat-icon-button","","matSuffix","","matTooltip","Bweteen 5 to 10 characters long and only alphanumeric allowed."],[4,"ngIf"],["matInput","","formControlName","password","type","password","placeholder","Enter password"],["mat-icon-button","","matSuffix","","matTooltip","6+ characters, alphanumeric, and symbols (_@.$&*-)"],["matInput","","formControlName","confirmPassword","required","","placeholder","Confirm password",3,"type"],["mat-icon-button","","matSuffix","",1,"m-1","cursor-pointer",3,"click"],[1,"button-container"],["mat-raised-button","","color","primary","type","submit"],["mat-raised-button","","color","warn","type","button",3,"click"],[1,"auth-options"],[1,"signup-text"],[1,"signup-link","cursor-pointer",3,"click"],[1,"cursor-pointer",3,"click"],["matInput","","formControlName","mobile","placeholder","Enter mobile number"],["matInput","","formControlName","email","placeholder","Enter email"]],template:function(o,t){if(o&1&&(n(0,"div",0)(1,"div",1),p(2,"div",2),r(),n(3,"h3",3),s(4,"Register"),r(),n(5,"form",4),u("ngSubmit",function(){return t.onSubmit()}),n(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),s(9,"Role *"),r(),p(10,"input",7),r(),v(11,Xt,4,0,"mat-form-field",8)(12,ei,4,0,"mat-form-field",8),r(),n(13,"div",5)(14,"mat-form-field",6)(15,"mat-label"),s(16,"Username"),r(),p(17,"input",9),n(18,"button",10)(19,"mat-icon"),s(20,"info"),r()(),v(21,ti,2,1,"mat-error",11),r()(),n(22,"div",5)(23,"mat-form-field",6)(24,"mat-label"),s(25,"Password"),r(),p(26,"input",12),n(27,"button",13)(28,"mat-icon"),s(29,"info"),r()(),v(30,ii,2,1,"mat-error",11),r(),n(31,"mat-form-field",6)(32,"mat-label"),s(33,"Confirm Password"),r(),p(34,"input",14),n(35,"div",15),u("click",function(){return t.hide=!t.hide}),n(36,"mat-icon"),s(37),r()(),v(38,oi,2,0,"mat-error",11),r()(),n(39,"div",16)(40,"button",17),s(41,"Sign Up"),r(),n(42,"button",18),u("click",function(){return t.onClear()}),s(43,"Clear"),r()()(),n(44,"div",19)(45,"p",20),s(46," Already have an account? "),n(47,"a",21),u("click",function(){return t.navigateToLogin()}),n(48,"mat-icon"),s(49,"person_add"),r(),s(50," Sign In "),r()(),n(51,"p",20)(52,"a",22),u("click",function(){return t.navigateVerifyPassword()}),n(53,"mat-icon"),s(54,"lock_open"),r(),s(55," Forgot Password? "),r()()()()),o&2){let a,c,h;l(5),d("formGroup",t.registerForm),l(6),d("ngIf",t.prefilledMobile),l(),d("ngIf",t.prefilledEmail),l(9),d("ngIf",((a=t.getControl("username"))==null?null:a.invalid)&&((a=t.getControl("username"))==null?null:a.touched)),l(9),d("ngIf",((c=t.getControl("password"))==null?null:c.invalid)&&((c=t.getControl("password"))==null?null:c.touched)),l(4),d("type",t.hide?"password":"text"),l(),H("aria-label","Show password"),l(2),z(t.hide?"visibility_off":"visibility"),l(),d("ngIf",!t.isPasswordMatch()&&((h=t.getControl("confirmPassword"))==null?null:h.touched))}},dependencies:[P,F,T,A,M,W,R,O,C,E,_e,be,B,j,N,X,D]})}}return i})();function ni(i,f){i&1&&(n(0,"mat-error"),s(1),r()),i&2&&(l(),y(" ","Please enter a valid password"," "))}function ri(i,f){i&1&&(n(0,"mat-error"),s(1," Passwords do not match "),r())}var xt=(()=>{class i{constructor(e,o,t,a,c,h){this.fb=e,this.route=o,this.userService=t,this.router=a,this.notification=c,this.loader=h,this.contactInfo="",this.isEmail=!1,this.hide=!0}ngOnInit(){this.route.queryParams.subscribe(e=>{this.isEmail=e.isEmail==="true",this.contactInfo=e.contact}),this.forgotPasswordForm=this.fb.group({contactInfo:[{value:this.contactInfo,disabled:!0}],password:["",[g.required,g.pattern(/^[a-zA-Z0-9_@.$&*-]{6,}$/)]],confirmPassword:["",g.required]})}getControl(e){return this.forgotPasswordForm.get(e)}onSubmit(){if(this.loader.show(),this.forgotPasswordForm.valid&&this.isPasswordMatch()){let e=this.forgotPasswordForm.get("password")?.value;this.userService.resetPassword(this.contactInfo,e,this.isEmail).subscribe({next:()=>{this.loader.hide(),this.notification.showSuccess("Password successfully reset! Redirecting to login..."),setTimeout(()=>{this.router.navigate(["/login"])},3e3)},error:o=>{this.loader.hide(),this.notification.showError(o.error.message||"Password reset failed. Please try again.")}})}}isPasswordMatch(){var e=this.forgotPasswordForm.get("password")?.value===this.forgotPasswordForm.get("confirmPassword")?.value;return e||this.loader.hide(),e}static{this.\u0275fac=function(o){return new(o||i)(m(V),m(Y),m(oe),m(S),m(q),m(L))}}static{this.\u0275cmp=b({type:i,selectors:[["app-forgot-password"]],decls:28,vars:7,consts:[[1,"capsule-container"],[1,"logo-container"],[1,"logo-animated"],[1,"page-header"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","contactInfo","readonly",""],["matInput","","formControlName","password","type","password","placeholder","Enter password"],["mat-icon-button","","matSuffix","","matTooltip","6+ characters, alphanumeric, and symbols (_@.$&*-)"],[4,"ngIf"],["matInput","","formControlName","confirmPassword","required","","placeholder","Confirm password",3,"type"],["mat-icon-button","","matSuffix","",1,"m-1",3,"click"],["mat-raised-button","","color","primary","type","submit"]],template:function(o,t){if(o&1&&(n(0,"div",0)(1,"div",1),p(2,"div",2),n(3,"h2",3),s(4,"Reset Password"),r()(),n(5,"form",4),u("ngSubmit",function(){return t.onSubmit()}),n(6,"mat-form-field",5)(7,"mat-label"),s(8),r(),p(9,"input",6),r(),n(10,"mat-form-field",5)(11,"mat-label"),s(12,"Password"),r(),p(13,"input",7),n(14,"button",8)(15,"mat-icon"),s(16,"info"),r()(),v(17,ni,2,1,"mat-error",9),r(),n(18,"mat-form-field",5)(19,"mat-label"),s(20,"Confirm Password"),r(),p(21,"input",10),n(22,"button",11),u("click",function(){return t.hide=!t.hide}),n(23,"mat-icon"),s(24),r()(),v(25,ri,2,0,"mat-error",9),r(),n(26,"button",12),s(27,"Reset Password"),r()()()),o&2){let a,c;l(5),d("formGroup",t.forgotPasswordForm),l(3),z(t.isEmail?"Email Id":"Mobile Number"),l(9),d("ngIf",((a=t.getControl("password"))==null?null:a.invalid)&&((a=t.getControl("password"))==null?null:a.touched)),l(4),d("type",t.hide?"password":"text"),l(),H("aria-label","Show password"),l(2),z(t.hide?"visibility_off":"visibility"),l(),d("ngIf",!t.isPasswordMatch()&&((c=t.getControl("confirmPassword"))==null?null:c.touched))}},dependencies:[P,F,T,A,M,W,R,O,C,E,_e,be,B,j,N,X,D]})}}return i})();var ze=(()=>{class i{constructor(e,o){this.authStateService=e,this.router=o}canActivate(e,o){if(this.authStateService.isOtpVerified())return!0;{let t=o.url.includes("forgot-password")?"/verify-forgot-password":"/verify-otp";return this.router.navigate([t]),!1}}static{this.\u0275fac=function(o){return new(o||i)(_(te),_(S))}}static{this.\u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function ai(i,f){i&1&&(n(0,"mat-error"),s(1," Please enter a valid mobile number "),r())}function si(i,f){i&1&&(n(0,"mat-error"),s(1," Please enter a valid mobile number "),r())}function li(i,f){if(i&1){let e=$();n(0,"div",19)(1,"re-captcha",20),u("resolved",function(t){G(e);let a=w();return U(a.onCaptchaResolved(t))}),r()()}}function ci(i,f){if(i&1&&(n(0,"div",21)(1,"span",22),s(2),r()()),i&2){let e=w();l(2),y("Resend OTP in ",e.countdown," seconds")}}function mi(i,f){if(i&1&&p(0,"input",28),i&2){let e=f.index;d("formControlName",e)}}function di(i,f){if(i&1){let e=$();n(0,"div",23)(1,"h4",24),s(2,"Enter OTP"),r(),n(3,"div",25),v(4,mi,1,1,"input",26),r(),n(5,"button",27),u("click",function(){G(e);let t=w();return U(t.verifyOtp())}),s(6,"Verify OTP"),r()()}if(i&2){let e=w();d("formGroup",e.verifyForm),l(4),d("ngForOf",e.otpControls.controls)}}var kt=(()=>{class i{constructor(e,o,t,a,c,h,I){this.fb=e,this.router=o,this.otpService=t,this.authStateService=a,this.loader=c,this.notificationService=h,this.userService=I,this.isOtpSent=!1,this.isResendAvailable=!1,this.countdown=60,this.captchaVerified=!1,this.otpToken=""}ngOnInit(){this.verifyForm=this.fb.group({email:["",[g.email]],mobile:["",[g.pattern(/^(\+91[-\s]?)?[0]?(91)?[789]\d{9}$/)]],otp:this.fb.array(new Array(6).fill("").map(()=>new he("",g.required)))})}getControl(e){return this.verifyForm.get(e)}get otpControls(){return this.verifyForm.get("otp")}onCaptchaResolved(e){this.captchaVerified=!!e}sendOtp(){this.loader.show();var e=!!this.verifyForm.get("email")?.value;if(this.captchaVerified&&(this.verifyForm.get("mobile")?.value||this.verifyForm.get("email")?.value)){let o="";e?o=this.verifyForm.get("email")?.value:o=this.verifyForm.get("mobile")?.value,this.userService.getUsername(o,e).pipe(Ge(t=>this.otpService.sendOtp(o,e))).subscribe({next:t=>{this.loader.hide(),this.notificationService.showSuccess("OTP sent successfully"),this.otpToken=t.otpToken,this.isOtpSent=!0,this.startCountdown()},error:t=>{this.loader.hide(),t.status===404?this.notificationService.showError("Not registered with app. Please SignUp"):(console.error("Failed to send OTP",t),this.notificationService.showError("Failed to send OTP. Please try again"))}})}else this.loader.hide(),this.notificationService.showError("Please verify the captcha and provide a valid contact.")}startCountdown(){this.isResendAvailable=!1,this.countdown=60,this.countdownSubscription=me(1e3).pipe(de(this.countdown)).subscribe({next:e=>{this.countdown=60-e-1},complete:()=>{this.isResendAvailable=!0}})}resendOtp(){this.isResendAvailable&&this.sendOtp()}verifyOtp(){this.loader.show();var e=!!this.verifyForm.get("email")?.value,o="";e?o=this.verifyForm.get("email")?.value:o=this.verifyForm.get("mobile")?.value;let t=this.otpControls.value.join("");this.otpService.verifyOtp(o,t,this.otpToken).subscribe({next:a=>{this.loader.hide(),a.valid?(this.authStateService.setOtpVerified(!0),this.router.navigate(["/forgot-password"],{queryParams:{contact:o,isEmail:e}})):this.notificationService.showError("Invalid OTP. Please try again.")},error:a=>{this.loader.hide(),console.error("OTP verification failed",a),this.notificationService.showError("OTP verification failed. Please try again.")}})}ngOnDestroy(){this.countdownSubscription&&this.countdownSubscription.unsubscribe()}navigateToLogin(){this.router.navigate(["/login"])}navigateToSignup(){this.router.navigate(["/role-selection"])}static{this.\u0275fac=function(o){return new(o||i)(m(V),m(S),m(Ie),m(te),m(L),m(q),m(oe))}}static{this.\u0275cmp=b({type:i,selectors:[["app-verify-forgot-password"]],decls:40,vars:8,consts:[[1,"capsule-container"],[1,"logo-container"],[1,"logo-animated"],[1,"page-header"],[3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline",1,"full-width"],["matInput","","formControlName","mobile","placeholder","Enter Mobile Number"],[4,"ngIf"],[1,"divider"],["matInput","","formControlName","email","placeholder","Enter Email"],["class","captcha-container",4,"ngIf"],["class","resend-otp-message",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",1,"full-width","login-button","m-3",3,"disabled"],["class","otp-section",3,"formGroup",4,"ngIf"],[1,"auth-options"],[1,"signup-text"],[1,"signup-link","cursor-pointer",3,"click"],[1,"forgot-password-link","cursor-pointer",3,"click"],[1,"captcha-container"],["siteKey","6LeLvHIqAAAAAJJVlNmel7PIIAdvQ1Gw3JeaXSMP",3,"resolved"],[1,"resend-otp-message"],[1,"resend-countdown"],[1,"otp-section",3,"formGroup"],[1,"otp-title"],["formArrayName","otp",1,"otp-inputs"],["maxlength","1","class","otp-input",3,"formControlName",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"full-width","login-button","m-2",3,"click"],["maxlength","1",1,"otp-input",3,"formControlName"]],template:function(o,t){if(o&1&&(n(0,"div",0)(1,"div",1),p(2,"div",2),n(3,"h2",3),s(4,"HealthDesk"),r()(),n(5,"h3",3),s(6,"Verify Contact"),r(),n(7,"form",4),u("ngSubmit",function(){return t.sendOtp()}),n(8,"div",5)(9,"mat-form-field",6)(10,"mat-label"),s(11," Mobile Number"),r(),p(12,"input",7),v(13,ai,2,0,"mat-error",8),r()(),n(14,"div",9),s(15,"or"),r(),n(16,"div",5)(17,"mat-form-field",6)(18,"mat-label"),s(19," Email"),r(),p(20,"input",10),v(21,si,2,0,"mat-error",8),r()(),v(22,li,2,0,"div",11)(23,ci,3,1,"div",12),n(24,"button",13),s(25),r()(),v(26,di,7,2,"div",14),n(27,"div",9),s(28,"or"),r(),n(29,"div",15)(30,"p",16),s(31," Don't have an account? "),n(32,"a",17),u("click",function(){return t.navigateToSignup()}),n(33,"mat-icon"),s(34,"person_add"),r(),s(35," Sign up "),r()(),n(36,"div",18),u("click",function(){return t.navigateToLogin()}),n(37,"mat-icon"),s(38,"lock_open"),r(),s(39," Sign In? "),r()()()),o&2){let a,c;l(7),d("formGroup",t.verifyForm),l(6),d("ngIf",((a=t.getControl("mobile"))==null?null:a.invalid)&&((a=t.getControl("mobile"))==null?null:a.touched)),l(8),d("ngIf",((c=t.getControl("email"))==null?null:c.invalid)&&((c=t.getControl("email"))==null?null:c.touched)),l(),d("ngIf",!t.isOtpSent),l(),d("ngIf",t.isOtpSent&&!t.isResendAvailable),l(),d("disabled",!t.captchaVerified||t.isOtpSent&&!t.isResendAvailable),l(),y(" ",t.isOtpSent?"Resend OTP":"Send OTP"," "),l(),d("ngIf",t.isOtpSent)}},dependencies:[ue,P,F,T,A,M,ge,R,O,ve,ye,C,E,B,j,N,D]})}}return i})();var Ct=(()=>{class i{constructor(e,o){this.router=e,this.route=o,this.showSidebar=!0}ngOnInit(){}static{this.\u0275fac=function(o){return new(o||i)(m(S),m(Y))}}static{this.\u0275cmp=b({type:i,selectors:[["app-anonymous"]],decls:1,vars:0,template:function(o,t){o&1&&p(0,"router-outlet")},dependencies:[ot],styles:[`body{background:linear-gradient(to right,#e22cdc,#63b4ee,#2cbf5d);animation:gradientAnimation 10s ease infinite;font-family:Roboto,sans-serif;color:#fff;background-size:200% 200%}@keyframes gradientAnimation{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.mat-primary{color:#d76745bc}.mat-accent{color:#2cbf5d}.mat-button{color:#2cbf5d;font-weight:700;transition:transform .3s ease,color .3s ease}.mat-button:hover{transform:scale(1.05);color:#d76745bc}.btn-custom{background-color:#d76745bc;border:none;color:#fff;padding:10px 20px;transition:all .3s ease}.btn-custom:hover{background-color:#2cbf5d;transform:scale(1.1);box-shadow:0 4px 15px #0003}.card-custom{background-color:#ffffff1a;border-radius:10px;padding:20px;box-shadow:0 4px 20px #0000001a;transition:transform .4s ease,box-shadow .4s ease}.card-custom:hover{transform:translateY(-10px);box-shadow:0 8px 25px #0000004d}.capsule-container{max-width:360px;max-height:100vh;background-color:#ffffffe6;border-radius:50px;padding:30px;box-shadow:0 10px 20px #0000004d;text-align:center;margin:1% auto auto;display:flex;flex-direction:column;overflow-y:auto;overflow-x:hidden;box-sizing:border-box}.capsule-container::-webkit-scrollbar{width:6px}.capsule-container::-webkit-scrollbar-thumb{background-color:#bb7fbb;border-radius:4px}.capsule-container::-webkit-scrollbar-track{background:transparent}.logo-animated{width:100px;height:100px;margin:0 auto 10px;border-radius:50%;background-image:url("./media/logo-P7TD5553.png");background-size:cover}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.logo-container h2{font-size:2rem;font-weight:700;background:linear-gradient(45deg,#673ab7,#03a9f4,#4caf50);-webkit-background-clip:text;color:transparent;animation:gradient-animation 4s ease-in-out infinite}@keyframes gradient-animation{0%{background-position:0%}to{background-position:100%}}mat-form-field,button,.divider{width:100%;transition:all .3s ease}::ng-deep mat-form-field.mat-form-field-appearance-outline .mat-form-field-outline-thick{border-color:#66bb6a;transition:border-color .3s ease}::ng-deep mat-form-field.mat-form-field-appearance-outline .mat-form-field-outline-thick.mat-focused{border-color:#673ab7;transition:border-color .4s ease}button.login-button{font-size:1rem;padding:10px;transition:transform .3s ease,box-shadow .3s ease}button.login-button:hover{transform:scale(1.05);box-shadow:0 4px 15px #0003}.divider{font-weight:700;color:#333;margin:20px 0;display:flex;align-items:center;position:relative}.divider:before,.divider:after{content:"";flex:1;height:1px;background:#333;margin:0 8px}.auth-options{text-align:center;font-size:.9rem}.auth-options .signup-text{display:flex;justify-content:center;align-items:center;margin:5px 0;color:#7217d4;font-weight:bolder}.auth-options a{display:inline-flex;align-items:center;color:#673ab7;font-weight:600;text-decoration:none;transition:color .3s ease,transform .3s ease;font-size:.9rem}.auth-options a:hover{color:#3f51b5;transform:translateY(-2px)}.auth-options a mat-icon{font-size:1rem;margin-right:5px;vertical-align:middle;transition:transform .3s ease}.roles-container{display:flex;flex-direction:column;gap:20px}.roles-container .role-tile{width:85px;height:85px;background:#fffc;border-radius:15px;box-shadow:0 4px 10px #0003;overflow:hidden;display:flex;align-items:center;justify-content:center;transition:transform .3s ease,box-shadow .3s ease;position:relative;cursor:pointer}.roles-container .role-tile img{width:80%;height:auto;transition:opacity .3s ease}.roles-container .role-tile:hover{transform:scale(1.05);box-shadow:0 4px 15px #0003}.roles-container .role-tile:hover img{opacity:.3}.roles-container .role-tile:hover .role-title{opacity:1;transform:translateY(0)}.roles-container .role-title{position:absolute;bottom:10px;text-align:center;color:#673ab7;font-weight:600;font-size:.65rem;opacity:0;transform:translateY(10px);transition:opacity .3s ease,transform .3s ease}.otp-section{margin-top:20px}.button-container{display:flex;justify-content:space-between;margin-top:20px}.otp-input{width:40px;height:40px;text-align:center;font-size:1.5rem;border-radius:5px;border:2px solid #4caf50;box-shadow:0 4px 8px #4caf504d;transition:transform .3s ease,box-shadow .3s ease;margin-bottom:5px}.otp-input:focus{outline:none;transform:scale(1.1);box-shadow:0 6px 12px #4caf5066;border-color:#388e3c}.success-snackbar{background-color:#4caf50!important;color:#fff}.error-snackbar{background-color:#f44336!important;color:#fff}.captcha-container{margin-bottom:15px}.resend-otp-message{color:#4caf50;font-size:.9rem;margin-bottom:10px}.otp-title{color:#4caf50;font-weight:700;font-size:1.2rem;margin-top:20px}.cursor-pointer{cursor:pointer}.page-header{font-size:2.5rem;font-weight:600;font-family:Roboto,sans-serif;text-align:center;margin-bottom:20px;color:transparent;background:linear-gradient(to right,#e22cdc,#63b4ee,#2cbf5d);-webkit-background-clip:text;background-clip:text;animation:fadeInTop 1s ease-out,gradientTextAnimation 10s ease infinite;background-size:200% 200%}@keyframes gradientTextAnimation{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}@keyframes fadeInTop{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}
`],encapsulation:2})}}return i})();var pi=[{path:"",component:Ct,children:[{path:"login",component:De},{path:"",component:De},{path:"role-selection",component:gt},{path:"verify-otp",component:yt},{path:"register",component:wt,canActivate:[ze]},{path:"verify-forgot-password",component:kt},{path:"forgot-password",component:xt,canActivate:[ze]}]}],Et=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=re({type:i})}static{this.\u0275inj=ne({imports:[je.forChild(pi),je]})}}return i})();var jo=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=re({type:i})}static{this.\u0275inj=ne({imports:[pt,Et]})}}return i})();export{jo as AnonymousModule};
